/* frontend/src/index.css */

@import url('https://fonts.googleapis.com/css2?family=Mochiy+Pop+P+One&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@500&family=Mochiy+Pop+P+One&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Kiwi+Maru:wght@500;700&family=Mochiy+Pop+P+One&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* --- 1. フォント設定 --- */
@font-face {
  font-family: 'TokuLaboV2';
  src: url('/fonts/TokuLaboV2.otf') format('opentype'); 
  font-weight: normal;
  font-style: normal;
}

.font-hakoniwa {
  font-family: 'Kiwi Maru', serif;
}

.font-hakoniwa {
  font-family: 'Kiwi Maru', serif;
  font-weight: 500; /* 基本の太さ */
}

.font-pop {
  font-family: 'TokuLaboV2', 'Mochiy Pop P One', sans-serif;
}

/* 文字の縁取り（柔らかい茶色で優しく） */
.text-stroke-garden {
  -webkit-text-stroke: 4px #8B4513; /* SaddleBrown */
  paint-order: stroke fill;
}

/* --- 2. ガーデン（箱庭）テーマ設定 --- */

/* 背景: 優しい春の空 + 方眼紙のようなグリッド（設計図感） */
.theme-garden-bg {
  background-color: #F0FDF4; /* 薄いミントグリーン */
  background-image: 
    linear-gradient(#e5e7eb 1px, transparent 1px),
    linear-gradient(90deg, #e5e7eb 1px, transparent 1px);
  background-size: 40px 40px;
  background-position: center bottom;
  transition: background-color 3s ease, color 3s ease;
}

.theme-garden-bg-night {
  background-color: #1e1b4b; /* Indigo-950 (深い夜の色) */
  /* 星空のようなグラデーション + 方眼紙線は薄く残す */
  background-image: 
    radial-gradient(circle at 50% 20%, #4c1d95 0%, #1e1b4b 60%), /* 紫の光 */
    linear-gradient(#ffffff0d 1px, transparent 1px),
    linear-gradient(90deg, #ffffff0d 1px, transparent 1px);
  background-size: 100% 100%, 40px 40px, 40px 40px;
  background-position: center top, center bottom, center bottom;
  color: #e0e7ff; /* 文字色を薄い青白に */
  transition: background-color 3s ease, color 3s ease;
}

/* --- 流れ星のアニメーション --- */
@keyframes shooting {
  0% {
    transform: translateX(0) translateY(0) rotate(135deg) scale(0);
    opacity: 0;
  }
  10% {
    opacity: 1;
    /* 進行方向: 左(-X) 下(+Y) */
    transform: translateX(-20px) translateY(20px) rotate(135deg) scale(1);
  }
  100% {
    /* 最終地点: 大きく左下へ移動 */
    transform: translateX(-300px) translateY(300px) rotate(135deg) scale(0);
    opacity: 0;
  }
}

.shooting-star {
  position: absolute;
  width: 4px;
  height: 4px;
  background: white;
  border-radius: 50%;
  box-shadow: 0 0 0 2px rgba(255,255,255,0.1), 0 0 10px 2px white, 0 0 20px 5px #a855f7;
  opacity: 0;
  /* アニメーション適用 */
  animation: shooting 4s ease-out infinite;
  
  /* アニメーション開始前から135度を維持するように設定 */
  transform: rotate(135deg);
  transform-origin: center center;
}

/* 流れ星の尾っぽ */
.shooting-star::before {
  content: '';
  position: absolute;
  top: 50%;
  
  /* 垂直位置の調整だけ残します */
  transform: translateY(-50%); 
  
  width: 150px;
  height: 2px;
  
  /* ★修正ポイント: グラデーションの向き */
  /* to left (右から左へ) にすることで、星に近い右側を白く、遠い左側を透明にします */
  background: linear-gradient(to left, rgba(255,255,255,1), transparent);
  
  /* 親要素の右端（星の頭）に合わせて配置 */
  right: 0;
}

/* 地面: 芝生の断面 */
.theme-garden-ground {
    background-color: #86EFAC; /* 薄い緑 */
    border-top: 8px solid #4ADE80; /* 草の部分 */
    background-image: repeating-linear-gradient(45deg, rgba(255,255,255,0.3) 0, rgba(255,255,255,0.3) 10px, transparent 10px, transparent 20px);
}

/* UI: 木製の看板風ボックス (メニュー用) */
.theme-wood-box {
    @apply bg-[#eecfa1] text-[#5D4037] border-b-8 border-r-4 border-[#8d6e63] rounded-xl shadow-lg;
    /* 木目テクスチャ風のグラデーション */
    background-image: linear-gradient(to bottom right, rgba(255,255,255,0.2), rgba(0,0,0,0.05));
}
.theme-wood-btn {
    @apply theme-wood-box hover:translate-y-1 hover:border-b-4 hover:shadow-sm active:translate-y-2 active:border-b-0 transition-all cursor-pointer;
}

/* UI: 新緑の葉っぱ風ボタン (ソロプレイ等) */
.theme-leaf-box {
    @apply bg-[#a7f3d0] text-[#064e3b] border-b-8 border-r-4 border-[#059669] rounded-2xl shadow-lg;
}
.theme-leaf-btn {
    @apply theme-leaf-box hover:translate-y-1 hover:border-b-4 hover:shadow-sm active:translate-y-2 active:border-b-0 transition-all cursor-pointer;
}

/* UI: お花風ボタン (マルチプレイ等) */
.theme-flower-box {
    @apply bg-[#fecdd3] text-[#881337] border-b-8 border-r-4 border-[#e11d48] rounded-2xl shadow-lg;
}
.theme-flower-btn {
    @apply theme-flower-box hover:translate-y-1 hover:border-b-4 hover:shadow-sm active:translate-y-2 active:border-b-0 transition-all cursor-pointer;
}

/* UI: 白い木の板（メインカード） */
/* .theme-white-wood-card {
    @apply bg-[#fffbeb] border-4 border-[#d4a373] rounded-3xl shadow-xl;
    background-image: repeating-linear-gradient(0deg, transparent, transparent 29px, #faebd7 30px);
} */


/* --- 3. アニメーション設定 --- */

/* ふわふわ浮く (Floating) */
@keyframes float-y {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
.animate-float {
  animation: float-y 3s ease-in-out infinite;
}

/* --- 修正: 間隔（休み時間）のある光のアニメーション定義 --- */
@keyframes shine-interval {
  0% {
    background-position: 250% 0; /* 十分に左 */
  }
  50% {
    background-position: -250% 0;  /* 十分に右へ抜ける */
  }
  100% {
    background-position: -250% 0;  /* ずっと右で待機 */
  }
}

/* ガーデンロゴ用の柔らかいレインボー */
.text-garden-logo {
  position: relative;
  display: inline-block;
  
  /* フォント指定 */
  font-family: 'Kiwi Maru', serif; 
  font-weight: 700;
  
  /* 色: 優しい森の緑 */
  color: #22c55e; /* Lime-600 */
  
  /* フチ: 白で太めに囲ってシールっぽく */
  -webkit-text-stroke: 1px #22c55e;
  paint-order: stroke fill;
  
}

/* キラッと光るエフェクト (光を優しく調整) */
.text-garden-logo::after {
  content: attr(data-text);
  position: absolute;
  top: 0; left: 0; width: 100%; height: 100%; z-index: 20;
  
  /* 光のグラデーション */
  background: linear-gradient(
    120deg, 
    transparent 45%, 
    rgba(255,255,255,1.0) 50%, 
    transparent 55%
  );
  background-size: 200% 100%;
  
  /* ★重要: これを追加！繰り返しを禁止します */
  background-repeat: no-repeat;
  
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  -webkit-text-stroke: 0;
  
  /* アニメーション適用 */
  animation: shine-interval 10s ease-in-out infinite;
}

/* --- 4. 背景デコレーション --- */

/* 雲のアニメーション */
@keyframes cloud-move {
  0% { transform: translateX(110vw); }
  100% { transform: translateX(-20vw); }
}
.animate-cloud-slow { animation: cloud-move 80s linear infinite; }
.animate-cloud-medium { animation: cloud-move 50s linear infinite; }


/* --- 5. 転がる積み木の演出 --- */

@keyframes flow-left {
  0% { left: 110%; } 
  100% { left: -20%; }
}

@keyframes jump-physics {
  0% { transform: translateY(0) rotate(0deg); }
  100% { transform: translateY(var(--jump-height)) rotate(var(--rot-angle)); }
}

/* 木製ブロック（積み木）のスタイル */
.key-wood-block {
  @apply bg-[#fde68a] border-b-4 border-r-4 border-[#d97706] rounded-md shadow-md flex items-center justify-center font-bold text-[#78350f] select-none;
  font-family: 'TokuLaboV2', sans-serif; /* 丸文字 */
  width: 50px; height: 50px; font-size: 1.5rem;
}

/* Enterキー（長い積み木） */
.key-wood-enter {
  @apply key-wood-block bg-[#bfdbfe] border-[#2563eb] text-[#1e3a8a];
  width: 90px; border-radius: 8px; font-size: 1rem;
}

/* Spaceキー（木の板） */
.key-wood-space {
  @apply key-wood-block bg-[#bbf7d0] border-[#16a34a] text-[#14532d];
  width: 120px; font-size: 0.8rem;
}

/* --- 6. 蔦（つた）の下線デコレーション --- */
.ivy-border-bottom {
  position: relative;
  display: inline-block;
  padding-bottom: 10px; /* 文字と蔦の間の余白 */
}

/* 擬似要素を使って、下線の位置にSVG画像を表示 */
.ivy-border-bottom::after {
  content: "";
  position: absolute;
  bottom: -4px; /* 位置微調整 */
  left: 0;
  width: 100%;
  height: 12px; /* 蔦の高さ */
  
  /* 蔦のSVGデータ (波線 + 葉っぱ) */
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 40 12' width='40' height='12'%3E%3Cpath d='M0 6 Q 10 12 20 6 T 40 6' fill='none' stroke='%2365a30d' stroke-width='1.5' stroke-linecap='round'/%3E%3Cpath d='M10 8 Q 13 10 15 7 Q 12 5 10 8' fill='%2384cc16'/%3E%3Cpath d='M30 4 Q 27 2 25 5 Q 28 7 30 4' fill='%2384cc16'/%3E%3C/svg%3E");
  
  background-repeat: repeat-x; /* 横に繰り返す */
  background-size: 40px 12px;
}

/* --- スター回転アニメーション (Y軸回転) --- */

/* 逆回転バージョン (反時計回り) */
@keyframes sparkle-spin-y-reverse {
  0% {
    transform: rotateY(0deg);
    filter: brightness(1.3) contrast(1.2);
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 255, 0, 0.6);
  }
  50% {
    transform: rotateY(-180deg);
    filter: brightness(1.0);
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
  }
  100% {
    transform: rotateY(-360deg);
    filter: brightness(1.3) contrast(1.2);
    text-shadow: 0 0 15px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 255, 0, 0.6);
  }
}

/* 適用するクラス */
.animate-sparkle-spin-y-reverse {
  animation: sparkle-spin-y-reverse 3s linear infinite;
  display: inline-block;
  transform-style: preserve-3d;
  backface-visibility: visible;
}

/* --- 7. 時間経過アニメーション (朝 -> 夜 -> 朝 のループ) --- */
@keyframes day-cycle {
  /* --- 朝 (スタート) --- */
  0% {
    background-color: #F0FDF4; /* ミントグリーン */
    color: #5D4037; /* 茶色の文字 */
    --grid-color: rgba(0, 0, 0, 0.15); /* 線: 薄い黒 */
  }

  /* --- 夕方 --- */
  45% {
    background-color: #fbcfe8; /* ピンク */
    color: #831843; /* ベリー色の文字 */
    --grid-color: rgba(0, 0, 0, 0.15); /* 線: まだ薄い黒でOK */
  }

  /* --- 夜の始まり --- */
  50% {
    background-color: #fa9a59c9; /* オレンジ */
    color: #4a044e; 
    --grid-color: rgba(255, 255, 255, 0.15); /* 線: ここから薄い白に切り替え */
  }

  /* --- 深夜 (一番暗い) --- */
  65% {
    background-color: #7771d1; /* 濃紺 */
    color: #e0e7ff; /* 白っぽい文字 */
    --grid-color: rgba(255, 255, 255, 0.15); /* 線: はっきり見える薄い白 */
  }

  /* --- 夜明け前 --- */
  95% {
    background-color: #e76eb36e; /* ピンク */
    color: #831843; /* ベリー色の文字 */
    --grid-color: rgba(255, 255, 255, 0.15);
  }

  /* --- 翌朝 (0%に戻る) --- */
  100% {
    background-color: #f4f6f7; 
    color: #5D4037;
    --grid-color: rgba(0, 0, 0, 0.15); /* 線: 薄い黒に戻す */
  }
}

.theme-garden-animate {
  /* 変数の初期値をセット（念のため） */
  --grid-color: rgba(0, 0, 0, 0.05);

  /* 背景パターン: 色指定の部分を var(--grid-color) に置き換え */
  background-image: 
    linear-gradient(var(--grid-color) 1px, transparent 1px),
    linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
  
  background-size: 40px 40px;
  background-position: center bottom;
  
  /* ★修正: infinite にして無限ループさせる */
  /* 名前を day-to-night から day-cycle に変更しました */
  animation: day-cycle 60s linear infinite;
}